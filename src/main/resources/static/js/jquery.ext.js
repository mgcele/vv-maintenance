function $id(a){if(typeof a=="string"){if(a.indexOf("#")==0){return $(a);}else{return $("#"+a);}}return $(a);}function $window(){return $(window);}var __isOnMobile=null;
function isOnMobile(){return __isOnMobile;}function getMaxZIndex(){var a=0;$('[style*="z-index"]').each(function(b,c){var d=c.style.zIndex;a=Math.max(a,d);
});return a;}declare("Ajax.core");Ajax.core.fn=function(){var f=false;var i=true;var h="GET";var g="";var b="application/json";var k="json";var n="";var e={};
var j=null;var l=null;var m=null;var o={};var a={};var d=null;this.get=function(p){h="GET";g=p;return this;};this.post=function(p){h="POST";g=p;return this;
};this.put=function(p){h="PUT";g=p;return this;};this.params=function(p){n=p;return this;};this.data=function(p){e=p;return this;};this.sync=function(){i=false;
return this;};this.cache=function(){f=true;return this;};this.asJson=function(){b="application/json";return this;};this.asForm=function(){b="application/x-www-form-urlencoded";
return this;};this.forJson=function(){k="json";return this;};this.forHtml=function(){k="html";return this;};this.done=function(p){j=p;return this;};this.fail=function(p){if(isString(p)){m=p;
}else{l=p;}return this;};this.always=function(p){d=p;return this;};this.onStatus=function(p,q){if(isString(q)){a[p]=q;}else{o[p]=q;}return this;};this.on401=function(p){return this.onStatus(401,p);
};this.on404=function(p){return this.onStatus(404,p);};this.on500=function(p){return this.onStatus(500,p);};function c(){var p=g;if(Ajax.baseUrl){p=Ajax.baseUrl+p;
}p=makeUrl(p,n,true);var r=null;if(h=="GET"){r=$.ajax({cache:f,async:i,type:h,url:p,dataType:k,data:e});}else{var q=e;if(b.endsWith("/json")){q=JSON.encode(q);
}r=$.ajax({cache:f,async:i,type:h,url:p,dataType:k,data:q,contentType:b});}r.done(function(u,s,t){if(typeof j=="function"){j(u,t);}});r.fail(function(B,y,s){var w={};
w.type="error";w.message=s;try{w=JSON.decode(B.responseText);if(!w.message){w.message=s;}}catch(x){}var u=B.status;var t=o[u];var z=true;if(t!=null){var v=a[u];
if(v){w.message=v;}var A=t(w,B,u);z=A!==false;}if(z&&l!=null){if(m){w.message=m;}l(w,B,u);}});if(d!=null){r.always(function(s,t,u){d(s,u);});}}this.go=function(){c();
};this.fail(function(q,s,p){var r=q.message||"处理失败";Layer.msgWarn(r);});this.on401(function(q,s,p){var r=q.message||"未认证或权限不足";Layer.msgWarn(r);});this.on404(function(q,s,p){var r=q.message||"未找到请求的资源";
Layer.msgWarn(r);});this.on500(function(q,s,p){var r=q.message||"服务器繁忙";Layer.msgWarn(r);});return this;};Ajax.get=function(a){return new Ajax.core.fn().get(a);
};Ajax.post=function(a){return new Ajax.core.fn().post(a);};Ajax.put=function(a){return new Ajax.core.fn().put(a);};var focusMarker=new (function(){this.mark=function(a,c){var b=c||"focus";
var d=$(a);d.on("mousedown",function(){$(this).addClass(b);});d.on("mouseup",function(){$(this).removeClass(b);});};})();declare("Toast.core");Toast.core.fn=function(){var f=this;
var c='<div class="toast"><span data-role="content" class="content alert"></span></div>';var g=null;var b=null;var e=null;var d=null;var h=null;function i(){if(g==null){g=$(c).appendTo(document.body);
b=g.get(0);g.css("display","none");e=g.find('>span[data-role="content"]');$(document).on("mousedown",function(j){if(j.target!=b&&!$.contains(b,j.target)){if($(b).is(":visible")){f.hide();
}}});}}function a(){g.css("z-index",getMaxZIndex());var m=$(window);var l=(m.width()-g.width()-20)/2;var j=$(document.body).scrollTop();var k=j+200;g.css("left",l+"px");
g.css("top",k+"px");}this.show=function(l,k,j,m){i();clearTimeout(d);m=m||null;if(typeof j=="function"){m=j;j=null;}h=m;j=j||"tip";l=l||"";k=k||2000;e.text(l);
e.get(0).className="content";e.addClass(j);a();g.show();d=setTimeout(function(){f.hide();},k);return this;};this.hide=function(){clearTimeout(d);if(g!=null){g.hide();
}if(typeof h=="function"){try{h();}catch(j){}}return this;};return this;};var Toast=new Toast.core.fn();function SwitchButton(){var e=function(){};var d=this;
var b=false;var g=null;var a=null;var h=false;this.onChange=e;this._triggerChange=function(){if(typeof this.onChange=="function"){this.onChange(h,this);
}};function c(i){a.prop("disabled",i);a.css("opacity",i?0.6:1);}function f(j){j=j!==false;var i=g.prop("checked");if(i==true){a.removeClass("switchOff");
a.addClass("switchOn");}else{a.removeClass("switchOn");a.addClass("switchOff");}if(i!=h){h=i;if(j){d._triggerChange();}}}this._createCtrls=function(){if(b){return;
}a.empty();a.addClass("switchBtn");var i='<input type="checkbox" />';g=$(i).appendTo(a);f();a.on("click",function(j){if($(this).is(":disabled")||$(this).prop("disabled")){return;
}g.prop("checked",!g.prop("checked"));f();});b=true;};this.init=function(i){if(isString(i)&&!i.startsWith("#")){i="#"+i;}a=$(i);this._createCtrls();return this;
};this.isOn=function(){return h===true;};this.isOff=function(){return !this.isOn();};this.switchOn=function(i){g.prop("checked",true);f(i);return this;
};this.switchOff=function(i){g.prop("checked",false);f(i);return this;};this.setDisabled=function(i){c(i);return this;};return this;}function RadioGroup(){var n=function(){};
var k=this;var h=genUniqueStr();var b=null;var m=null;var i=false;var a={};var d=[];var g=[];var e=null;this.onChange=n;this._triggerChange=function(){if(typeof this.onChange=="function"){this.onChange(e,this);
}};function c(p){var o=d.find(function(r,s){var q=r.data("target");return q.val()==p;});return o==null?null:o.data("target");}function l(){e=null;d.forEach(function(p,q){var r=a.items[q];
var o=p.data("target");o.prop("checked",false);var s=g[q];p.removeClass(r.bgClassChecked);if(a.markerClass){p.removeClass(a.markerClass);}s.attr("src",r.image);
});}function f(){d.forEach(function(p,q){var r=a.items[q];var o=p.data("target");var t=g[q];if(o.is(":checked")){p.addClass(r.bgClassChecked);if(a.markerClass){p.addClass(a.markerClass);
}t.attr("src",r.imageChecked);var s=o.val();if(s!=e){e=s;k._triggerChange();}}else{p.removeClass(r.bgClassChecked);if(a.markerClass){p.removeClass(a.markerClass);
}t.attr("src",r.image);}});}function j(o){d.forEach(function(q,r){q.prop("disabled",o);var p=a.useOpacity?(o?0.6:1):1;q.css("opacity",p);});}this._createCtrls=function(){if(i){return;
}var z=a.containerId;if(isString(z)&&!z.startsWith("#")){z="#"+z;}b=$(z);m=$('<table class="radioGroup"></table>').appendTo(b);a.markerClass=a.markerClass||"";
a.useOpacity=a.useOpacity!==false;a.useRadius=a.useRadius!==false;a.useBorder=a.useBorder!==false;var A=a.width||"100%";var B=parseDimen(A);m.css("width",B.value+B.unit);
var F=a.items.length;var J=B.unit=="%";if(J){A=Math.floor(100/F)+"%";}else{A=Math.floor(B.value*1/F)+B.unit;}var y=a.height||"100%";var E=parseDimen(y);
J=E.unit=="%";if(J){y=b.height()+"px";}else{y=E.value+E.unit;}var r=a.imageWidth||"100%";if(isNum(r)){r+="px";}var I=a.imageHeight||"100%";if(isNum(I)){I+="px";
}var u=$("<tr></tr>").appendTo(m);var t=a.name||"group-"+h;var q=null;for(var C=0,G=F;C<G;C++){var o=a.items[C];o.id=o.id||"";o.text=o.text||"";o.image=o.image||"";
o.imageChecked=o.imageChecked||"";o.bgClass=o.bgClass||"";o.bgClassChecked=o.bgClassChecked||"";var p=$("<td></td>").appendTo(u);p.css("width",A);p.css("height",y);
p.css("line-height",y);var D=o.image?'<img align="absmiddle" src="'+o.image+'" width="'+r+'" height="'+I+'"/>':o.text;var x=o.id?' id="'+o.id+'" ':" ";
var v="<input "+x+' type="radio" value="'+o.value+'" name="'+t+'" style="display:none;" /><label role="proxy" style="display:inline-block;text-align:center;vertical-align:middle;width:100%;height:'+y+";line-height:"+y+'">'+D+"</label>";
$(v).appendTo(p);q=p.find('label[role="proxy"]');d.add(q);q.addClass(o.bgClass);if(a.useRadius){if(C==0){if(F==1){q.addClass("leftRadius rightRadius");
}else{q.addClass("leftRadius");}}else{if(C==F-1){q.addClass("rightRadius");}}}if(a.useBorder){q.addClass("border");if(C==F-1){q.addClass("borderLast");
}}var s=p.find("input:radio");q.data("target",s);if(F>1){q.on("click",function(K){if($(this).is(":disabled")||$(this).prop("disabled")){return;}$(this).data("target").prop("checked",true);
f();});}else{q.addClass(o.bgClass);}var w=q.find("img");g.add(w);w.attr("src",o.image);if(!a.useBorder&&C<F-1){var H=$('<td style="width:1px;"><label style="display:inline-block;vertical-align:middle;width:100%;height:'+y+";line-height:"+y+'">&nbsp;</label></td>').appendTo(u);
H.find("label").addClass("seperator");}}};this.init=function(o){a=o||{};a.items=a.items||[];this._createCtrls();return this;};this.setValue=function(p){var o=c(p);
if(o!=null){o.prop("checked",true);f();}return this;};this.getValue=function(){return e;};this.setDisabled=function(o){j(o);return this;};return this;}function TabGroup(){var n=function(){};
var j=this;var g=genUniqueStr();var b=null;var m=null;var h=false;var a={};var d=[];var l=[];var e=null;this.onChange=n;this._triggerChange=function(){if(typeof this.onChange=="function"){this.onChange(e,this);
}};function c(p){var o=d.find(function(r,s){var q=r.data("target");return q.val()==p;});return o==null?null:o.data("target");}function k(){e=null;d.forEach(function(p,q){var r=a.items[q];
var o=p.data("target");o.prop("checked",false);p.removeClass(r.bgClassChecked);var s=l[q];s.hide();});}function f(){d.forEach(function(p,q){var r=a.items[q];
var o=p.data("target");var t=l[q];if(o.is(":checked")){p.addClass(r.bgClassChecked);t.show();var s=o.val();if(s!=e){e=s;j._triggerChange();}}else{p.removeClass(r.bgClassChecked);
t.hide();}});}function i(o){d.forEach(function(q,r){q.prop("disabled",o);var p=a.useOpacity?(o?0.6:1):1;q.css("opacity",p);});}this._createCtrls=function(){if(h){return;
}var y=a.containerId;if(isString(y)&&!y.startsWith("#")){y="#"+y;}b=$(y);m=$('<table class="tabGroup"></table>').appendTo(b);a.useOpacity=a.useOpacity!==false;
var z=a.width||"100%";var A=parseDimen(z);m.css("width",A.value+A.unit);var E=a.items.length;var H=A.unit=="%";if(H){z=Math.floor(100/E)+"%";}else{z=Math.floor(A.value*1/E)+A.unit;
}var w=a.height||"100%";var D=parseDimen(w);H=D.unit=="%";if(H){w=b.height()+"px";}else{w=D.value+D.unit;}var u=$("<tr></tr>").appendTo(m);var t=a.name||"group-"+g;
for(var B=0,F=E;B<F;B++){var o=a.items[B];o.id=o.id||"";o.text=o.text||"";o.bgClass=o.bgClass||"";o.bgClassChecked=o.bgClassChecked||"";var q=$("<td></td>").appendTo(u);
q.css("width",z);q.css("height",w);q.css("line-height",w);var C=o.text;var x=o.id?' id="'+o.id+'" ':" ";var v="<input "+x+' type="radio" value="'+o.value+'" name="'+t+'" style="display:none;" /><label role="proxy" style="display:inline-block;text-align:center;vertical-align:middle;width:100%;height:'+w+";line-height:"+w+'">'+C+"</label>";
$(v).appendTo(q);var r=q.find('label[role="proxy"]');d.add(r);r.addClass(o.bgClass);if(B<E-1){var G=$("<td></td>").appendTo(u);G.addClass(o.bgClass);G.addClass("seperator");
}var p=$id(o.page);l.add(p);p.hide();var s=q.find("input:radio");r.data("target",s);r.on("click",function(I){if($(this).is(":disabled")||$(this).prop("disabled")){return;
}$(this).data("target").prop("checked",true);f();});}};this.init=function(o){a=o||{};a.items=a.items||[];this._createCtrls();return this;};this.setValue=function(p){var o=c(p);
if(o!=null){o.prop("checked",true);f();}return this;};this.getValue=function(){return e;};this.setDisabled=function(o){i(o);return this;};return this;}function PopupProxy(){var a=function(){};
this.popup=null;this.target=null;this.onPopupShow=a;this.onPopupHide=a;this.triggerPopupShow=function(){this.onPopupShow(this);};this.triggerPopupHide=function(){this.onPopupHide(this);
};this.adjustPopupBottom=function(h){var d=this.getPopup();var c=$(h);var f=c.offset();var e=f.top+c.height();var g=e;var b=g+d.height();var i=$(window).height();
if(b>i-4){g-=(b-i)+4;d.css("top",g+"px");}};this.bind=function(c,g,e,b){this.popup=$(c);this.target=$(g);this.popup.hide();this.popup.css("position","absolute");
if(this.popup.width()>$(window).width()){this.popup.width($(window).width());}var i=this.popup.get(0);var h=this.target.get(0);var d=(e==null)?null:$(e).get(0);
b=b||"left";if(b===true){b="center";}var f=this;this.popup.on("mousedown",false);this.popup.on("click",false);this.target.on("mousedown",function(l){l.stopPropagation();
var k=d!=null?d:h;if($(i).is(":hidden")){$(document).triggerHandler("mousedown");var j=$(h).is(":disabled")||$(h).prop("disabled")==true;if(!j){$(i).css("z-index",getMaxZIndex()+1);
$(i).show();$(i).position({my:(b=="center"?"center top":(b=="right"?"right top":"left top")),at:(b=="center"?"center bottom":(b=="right"?"right bottom":"left bottom")),of:k});
f.triggerPopupShow();}$(document).one("mousedown",function(m){if(m.target!=i&&!$.contains(i,m.target)){if($(i).is(":visible")){$(i).hide();f.triggerPopupHide();
}}});}else{$(i).hide();f.triggerPopupHide();}f.adjustPopupBottom(k);});return this;};this.getPopup=function(){return this.popup;};this.getTarget=function(){return this.target;
};return this;}PopupProxy.newOne=function(){return new PopupProxy();};function DropdownMenu(){var d=null;var a=null;var c=[];var b=null;this._createMenu=function(){if(a==null){var e='<ul class="menu"></ul>';
a=$(e).appendTo(document.body);a.on("mousedown","> li.menu-item",function(f){$(f.target).addClass("menu-item-active");});a.on("mouseup","> li.menu-item",function(f){$(f.target).removeClass("menu-item-active");
});a.on("click",">li.menu-item",function(g){d.getPopup().hide();if(b!=null){var f=$(g.target);b(f.data("data"),f.text());}});}};this._createMenuItems=function(){a.empty();
var f=c.length;for(var g=0;g<f;g++){var j=c[g];var e=j.text;var k='<li class="menu-item"></li>';var h=$(k).appendTo(a);h.text(e);h.data("data",j);}a.find("> li.menu-item").hover(function(){$(this).addClass("menu-item-active");
},function(){$(this).removeClass("menu-item-active");});};this.init=function(f,e){this._createMenu();a.css("display","none");a.addClass("boxShadow");if(isString(f)&&!f.startsWith("#")){f="#"+f;
}e=e||false;$(f).css("cursor","default");$(f).addClass("drowDownBtn");d=PopupProxy.newOne().bind(a,f,null,e?"right":"left");return this;};this.setMenuItemClickHandler=function(e){b=e;
return this;};this.setMenuItems=function(e){c=e||[];this._createMenuItems();return this;};return this;}function DatePicker(){var i=function(){};this.onShow=i;
this.onHide=i;this.onPicked=i;this._triggerShow=function(){this.onShow(this);};this._triggerHide=function(){this.onHide(this);};this._triggerPicked=function(){this.onPicked(this);
};var f=null;var c=null;var h="选择日期";this.setPlaceholder=function(j){h=j;};var a={startDate:new Date().addDays(1),endDate:new Date().addDays(30)};var d=true;
var g=[];function b(p){if(p==null||p.length<1){return null;}var j=[];var q=new Array(7);j.add(q);var r=p.length;var k=d?0:6;var o=null;for(var m=0;m<r;
m++){var l=p[m];if(o==null){o=l.getMonth();j.tagYear=l.getFullYear();j.tagMonth=o+1;}var n=l.getPart("dayofweek");q[n]=l;if(n%7==k&&m<r-1){q=new Array(7);
j.add(q);}}return j;}var e=false;this._renderCtrls=function(){g=[];var F=[];var u=a.endDate.diff(a.startDate,"day")+1;var H=-1;for(var C=0,A=-1;C<u;C++){var n=a.startDate.addDays(C);
F[C]=n;if(n.getMonth()!=H){H=n.getMonth();g[++A]=[];}g[A].add(n);}var o=d?1:0;var q=$(f);q.empty();var l=String.builder();l.append('<table class="thin-grid-line weekdayNames"><tr>');
l.append('<td class="blockHeader">周</td>');for(var C=0,A=o;C<7;C++,A++){l.append("<td>",__weekDayChsNames[A%7],"</td>");}l.append("</tr></table>");$(l.value).appendTo(q);
var p=g.length;for(var C=0;C<p;C++){var D=b(g[C]);var G=$("<table></table>").appendTo(q);G.addClass("thin-grid-line weekdays");var t=D.length;for(var A=0;
A<t;A++){var r=D[A];var s=$("<tr></tr>").appendTo(G);if(A==0){s.addClass("first");var x=$('<td class="blockHeader"></td>').appendTo(s);var B=$('<span class="year">'+D.tagYear+"</span><br/>").appendTo(x);
var E=$('<span class="month">'+D.tagMonth+"月</span><br/>").appendTo(x);x.attr("rowspan",t);}for(var z=0,y=o;z<7;z++,y++){var w=$("<td></td>").appendTo(s);
var v=y%7;var n=r[v];if(n!=null){w.attr("data-dateStr",n.format("yyyy-MM-dd"));w.text(padLeft(n.getPart("day"),2," "));if(v==0||v==6){w.addClass("weekend");
}else{w.addClass("workday");}}else{w.html("&nbsp;");}}}}e=true;};this.init=function(k,m,j){var n=null;if(f==null){f=document.createElement("div");f=document.body.appendChild(f);
n=$(f);n.addClass("datePicker");}else{n=$(f);}n.css("display","none");n.addClass("boxShadow");if(isString(k)&&!k.startsWith("#")){k="#"+k;}if(isString(m)&&!m.startsWith("#")){m="#"+m;
}$(k).prop("readonly",true);$(k).css("cursor","default");c=PopupProxy.newOne().bind(f,k,m,j);var l=this;c.onPopupShow=function(p){var q=p.getTarget();var o=q.val();
if(isNullOrBlank(o)){q.get(0).placeholder=q.prop("placeholder")||h;}if(Date.isValidDate(o)){l.selectDay(o);}l._triggerShow();};n.on("click",".weekdays td[data-datestr]",function(q){var p=n.find(".weekdays td[data-datestr].selected-day");
p.removeClass("selected-day");var o=q.target;$(o).addClass("selected-day");c.getTarget().val($(o).attr("data-datestr"));c.getPopup().hide();c.triggerPopupHide();
l._triggerPicked();});return this;};this.getDateRange=function(){var j={};j.startDate=a.startDate;j.endDate=a.endDate;return j;};this.setDateRange=function(j,k){if(typeof j=="string"){j=Date.parseAsDate(j);
}if(typeof k=="string"){k=Date.parseAsDate(k);}if(k<=j){k=j;}a.startDate=j;a.endDate=k;this._renderCtrls();return this;};this.show=function(){c.getTarget().get(0).focus();
c.getTarget().trigger("mousedown");return this;};this.getSelectedDay=function(){if(!e){this._renderCtrls();}var k=$(f);var j=k.find(".weekdays td[data-datestr].selected-day");
if(j.size()==1){return j.attr("data-datestr");}else{return null;}};this.selectDay=function(k){if(!e){this._renderCtrls();}var j=k;if(typeof j=="string"){j=Date.parseAsDate(j);
}j=j.format("yyyy-MM-dd");var n=$(f);var m=n.find('.weekdays td[data-datestr="'+j+'"]');if(m.is(":disabled")){m.removeClass("selected-day");}else{var l=n.find(".weekdays td[data-datestr].selected-day");
l.removeClass("selected-day");m.addClass("selected-day");}return this;};this.disableDay=function(k,m){if(!e){this._renderCtrls();}var j=k;if(typeof j=="string"){j=Date.parseAsDate(j);
}j=j.format("yyyy-MM-dd");var n=$(f);var l=n.find('.weekdays td[data-datestr="'+j+'"]');if(l.size()>0){c.getTarget().val("");l.prop("disabled",true);l.removeClass("selected-day");
l.addClass("disabled-day");if(m!=null){l.attr("title",m);}}return this;};return this;}