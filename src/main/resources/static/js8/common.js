!function(a){a(function(){var b=function(){var b=(a(window).height(),a(this).width()),c=a(".fix_ewm").width();1120>b?(a(".fix_ewm").css("right",0),a(".fix_ewmimg").css("right",0)):(a(".fix_ewm").css("right",(b-1e3)/2-c-50),a(".fix_ewmimg").css("right",(b-1e3)/2-c-50))};a("#search_form .search_input").val(""),b(),a(".fix_ewm").bind("mouseenter",function(){a(".fix_ewmimg").fadeIn()}),a(".fix_ewm").bind("mouseleave",function(){a(".fix_ewmimg").fadeOut()});var c=a('<a class="backToTop" href="javascript:void(0)"></a>').appendTo(a("body")).click(function(){a("html,body").animate({scrollTop:0},300)});a(window).bind("scroll resize",function(){var b=a(document).scrollTop(),d=(a(window).height(),a(this).width()),e=a(".backToTop").width();b>0?c.fadeIn():c.fadeOut(),1120>d?a(".backToTop").css("right",0):a(".backToTop").css("right",(d-1e3)/2-e-50)}),a(".choose_city span").bind("click",function(){0==a(".city_slide").css("opacity")?(a(".city_slide").css("top","10px").show(),a(".city_slide").animate({top:20,opacity:1},{duration:600,easing:"linear"})):a(".city_slide").animate({opacity:0},{duration:500,easing:"linear"}).hide()}),a(".choose_city").bind("mouseleave",function(){a(".city_slide").animate({opacity:0},{duration:500,easing:"linear"})}),a(".city_list").delegate("li a","click",function(){var b=a(this).text(),c=a(this).attr("city_id");a(".choose_city span").text(b).attr("city_id",c),a(".city_slide").animate({opacity:0},{duration:500,easing:"linear"}),a.get("/basic/region/set_city?city_id="+c,function(a){0==a.code?location.reload():alert(a.msg)})}),a(".choose_city span").length>0&&a.getJSON("/basic/region/get_open_city",function(b){if(0==b.code){a(".city_list").empty();for(var c=b.data,d=0;d<c.length;d++){var e='<li><a href="javascript:;" city_id="'+c[d].id+'">'+c[d].regionName+"</a></li>";a(".city_list").append(e)}}else alert(b.msg)}),a("body").delegate(".search_input","keyup",function(b){var c=a(".search_input").val();if(40!=b.keyCode&&38!=b.keyCode)a.ajax({type:"POST",success:function(b){if(0==b.code){a("#search_form ul").empty();for(var c=b.data,d=0;d<c.length;d++){var e='<li><a href="javascript:;" id="'+c[d].id+'">'+c[d].brandName+" "+c[d].serialName+" "+c[d].name+"</a></li>";a("#search_form ul").append(e).show()}0!=b.hasMore&&a("#search_form ul").append("<p>还有更多...  请填写的更加详细</p>"),a("#search_form ul li").bind("click",function(){var b=a(this).find("a").attr("id"),c=a(this).find("a").text();a(".search_input").val(c).attr("data",b),a("#search_form ul").hide()})}else alert(b.msg)},error:function(){alert("请求失败")},data:{queryCount:3,name:c},url:"/basic/car/model_suggest"});else{var d=a("#search_form ul li.key").index();-1==d?40==b.keyCode&&a("#search_form ul li").first().addClass("key"):40==b.keyCode&&9!=d?(a("#search_form ul li").removeClass("key"),a("#search_form ul li").eq(d+1).addClass("key")):38==b.keyCode&&0!=d&&(a("#search_form ul li").removeClass("key"),a("#search_form ul li").eq(d-1).addClass("key"));var e=a("#search_form ul li.key a").attr("id"),f=a("#search_form ul li.key a").text();a("#search_form .search_input").val(f).attr("data",e)}}),a("#search_form").bind("mouseleave",function(){a("#search_form ul").hide()}),a("#search_form").bind("submit",function(b){b.preventDefault();var c=a("#search_form .search_input").attr("data"),d=a("#ss").val();void 0!=c&&""!=c?window.location.href="/front/index/show?model="+c+"&ss="+d:alert("请输入正确的车型")}),a(".del_input").bind("click",function(){a("#search_form .search_input").val("").focus(),a(".search_form ul").hide().empty()}),a("#search_form .search_input").bind("focus",function(){var b=a(".search_form ul li").length;b>0&&(a(".search_form ul").show(),a("#search_form ul li").removeClass("key"))}),a("body").delegate("#brand_search","keyup",function(){var b=a(this).val();""!=b?(a("#search_brand").html('<div class="first_step2"></div>').show(),a.ajax({type:"POST",success:function(b){for(var c=0;c<b.length;c++){var d='<a class="car_list" href="javascript:;" data-pinyin="'+b[c].pinyin+'" id="'+b[c].id+'" data-img="'+b[c].logo+'">'+b[c].name+"</a>";a(".first_step2").append(d)}a(".first_step2").mCustomScrollbar(),a(".first_step").hide(),a(".right_letter").hide()},error:function(){alert("请求失败")},data:{brand_name:b},url:"/basic/car/brand_suggest"})):(a("#search_brand").hide().empty(),a(".first_step").show(),a(".right_letter").show())}),a(".right_letter a").bind("click",function(){var b=a(this).attr("data"),c=a(this).text(),d=a(this).index()-1;0==b?(a(".car_first").show(),a(".car_list").show()):(a(".car_first").hide(),a(".car_list").hide(),a(".car_first").eq(d).show(),a("."+c).show())}),a("#show_brand").delegate(".car_list","click",function(){var b=a(this).attr("id"),c=a(this).text(),d=a(this).attr("data-img");a.ajax({type:"POST",success:function(b){if(0!=b.length){a("#show_serial").html('<div class="step_corner"></div>');for(var e=0;e<b.length;e++){var f='<a class="car_list" href="javascript:;" id="'+b[e].id+'">'+b[e].name+"</a>";a("#show_serial .step_corner").append(f)}a("#show_serial").next(".no_choice").hide(),a("#show_serial").show(),a(".step_corner").mCustomScrollbar(),a("#show_serial").parent("div").find(".static_wrapper").find(".static_icon").removeClass("static_none"),a("#show_serial").prev(".choosecar_title").addClass("ft_green"),d=""==d?"//s.ebaoyang.cn/web/release/index_v2/img/logo/default.png":"//s.ebaoyang.cn/web/release/index_v2/img/logo/"+d,a("#show_brand").parent().find(".choosen_box img").attr("src",d)}else a("#show_serial").next(".no_choice").show(),a("#show_serial").next(".no_choice").find(".choose_turn").hide(),a("#show_serial").next(".no_choice").find(".choose_sorry").show();a("#show_brand").next(".choosen_box").find(".brand_name").text(c),a("#show_brand").hide(),a("#show_brand").next(".choosen_box").show(),a("#show_brand").parent("div").find(".static_wrapper").find(".static_icon").addClass("static_change")},error:function(){alert("请求失败")},data:{brand_id:b},url:"/basic/car/selectSerial"})}),a("#show_serial").delegate(".car_list","click",function(){var b=a(this).attr("id"),c=a(this).text();a.ajax({type:"POST",success:function(b){if(0!=b.length){a("#show_model").html('<div class="step_corner"></div>');for(var d=0;d<b.length;d++){var e='<a class="car_list" href="javascript:;" id="'+b[d].id+'">'+b[d].name+"</a>";a("#show_model .step_corner").append(e)}a("#show_model").next(".no_choice").hide(),a("#show_model").show(),a(".third_step").mCustomScrollbar(),a("#show_model").parent("div").find(".static_wrapper").find(".static_icon").removeClass("static_none"),a("#show_model").prev(".choosecar_title").addClass("ft_green")}else a("#show_model").next(".no_choice").show(),a("#show_model").next(".no_choice").find(".choose_turn2").hide(),a("#show_model").next(".no_choice").find(".choose_sorry2").show();a(".step_corner").mCustomScrollbar(),a(".series_name").text(c),a("#show_serial").hide(),a("#show_serial").parent("div").find(".choosen_box").show(),a("#show_serial").parent("div").find(".static_wrapper").find(".static_icon").addClass("static_change")},error:function(){alert("请求失败")},data:{serial_id:b},url:"/basic/car/selectModel"})}),a("#show_model").delegate(".car_list","click",function(){var b=a(this).attr("id"),c=a(this).text(),d=a("#ss").val();a(".model_name").text(c),a("#show_model").hide(),a("#show_model").parent("div").find(".choosen_box").show(),a("#show_model").parent("div").find(".static_wrapper").find(".static_icon").addClass("static_change"),a(".order_btn").attr("href","/front/index/show?model="+b+"&ss="+d)}),a("body").delegate(".static_change","click",function(){var b=a(this).parent("div").parent(".choosecar_items").index();a(".choosecar_items").eq(b).find(".choosecar_box").show(),a(".choosecar_items").eq(b).find(".choosen_box").hide(),a(".choosecar_items").eq(b).find(".static_icon").removeClass("static_change");for(var c=b+1;3>c;c++)a(".choosecar_items").eq(c).find(".no_choice").show(),a(".choosecar_items").eq(c).find(".no_choice div").first().show(),a(".choosecar_items").eq(c).find(".no_choice div").last().hide(),a(".choosecar_items").eq(c).find(".choosecar_box").hide().empty(),a(".choosecar_items").eq(c).find(".choosen_box").hide(),a(".choosecar_items").eq(c).find(".static_icon").removeClass("static_change"),a(".choosecar_items").eq(c).find(".choosecar_title").removeClass("ft_green")}),a(".flow_img").addClass("flow_act"),a(".flow_arrow").first().addClass("flow_arrow_act"),a(".flow_items").bind("mouseover",function(){var b=a(this).find("p").first().attr("data");a(".flow_tip").hide(),a(".flow_tip").eq(b).show(),a(".flow_items p").removeClass("flow_act"),a(this).find("p").first().addClass("flow_act"),a(".flow_arrow").removeClass("flow_arrow_act"),a(this).next(".flow_arrow").addClass("flow_arrow_act")}),a(".news_title").bind("click",function(){var b=a(this),c=b.parent("li").index();b.parent("li").hasClass("news_act")||(a(".news_list li").removeClass("news_act"),b.parent("li").addClass("news_act"),a(".news_show_li").removeClass("news_show_act"),a(".news_show_li").eq(c).addClass("news_show_act"))})})}(jQuery);